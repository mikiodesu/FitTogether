<%= render 'layouts/header' %>

<div class="workouts-timeline">
  <% @workouts.each do |workout| %>
    <div class="workout-item">
      <%= image_tag workout.user.get_profile_image(50, 50), class: "profile-img" %>
      <div class="workout-content">
        <p class="user-name"><%= link_to workout.user.name, user_path(workout.user) %></p>
        <p class="workout-date"><%= link_to "æ—¥ä»˜ï¼š#{workout.date.strftime('%-m/%-d')}", workout_path(workout) %></p>
        <p class="workout-memo"><%= workout.memo %></p>

        <!-- ã„ã„ã­ & ã‚³ãƒ¡ãƒ³ãƒˆ -->
        <div class="workout-actions">
          <%= link_to "ðŸ‘ #{workout.likes.count}", workout_likes_path(workout), method: :post %>
          <%= link_to "ðŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆ(#{workout.comments.count})", workout_path(workout) %>
        </div>

        <!-- ã‚³ãƒ¡ãƒ³ãƒˆè¡¨ç¤ºï¼ˆæœ€æ–°3ä»¶ã ã‘ãªã©ï¼‰ -->
        <div class="comments">
          <% workout.comments.limit(3).each do |comment| %>
            <p><strong><%= comment.user.name %>:</strong> <%= comment.content %></p>
          <% end %>
        </div>

        <!-- ã‚³ãƒ¡ãƒ³ãƒˆãƒ•ã‚©ãƒ¼ãƒ  -->
        <%= form_with(model: [workout, Comment.new], local: true) do |f| %>
          <%= f.text_field :content, placeholder: "ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ..." %>
          <%= f.submit "æŠ•ç¨¿" %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>